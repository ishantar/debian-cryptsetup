<!doctype refentry PUBLIC "-//OASIS//DTD DocBook V4.1//EN" [

  <!-- Fill in your name for FIRSTNAME and SURNAME. -->
  <!ENTITY dhfirstname "<firstname>Bastian</firstname>">
  <!ENTITY dhsurname   "<surname>Kleineidam</surname>">
  <!-- Please adjust the date whenever revising the manpage. -->
  <!ENTITY dhdate      "<date>Dec 29, 2004</date>">
  <!-- SECTION should be 1-8, maybe w/ subsection other parameters are
       allowed: see man(7), man(1). -->
  <!ENTITY dhsection   "<manvolnum>5</manvolnum>">
  <!ENTITY dhemail    "<email>calvin@debian.org</email>">
  <!ENTITY dhusername "Bastian Kleineidam">
  <!ENTITY dhucpackage "<refentrytitle>CRYPTTAB</refentrytitle>">
  <!ENTITY dhpackage   "crypttab">

  <!ENTITY debian      "<productname>Debian</productname>">
  <!ENTITY gnu         "<acronym>GNU</acronym>">
]>

<refentry>
  <refentryinfo>
    <address>
      &dhemail;
    </address>
    <author>
      &dhfirstname;
      &dhsurname;
    </author>
    <copyright>
      <year>2004</year>
      <holder>&dhusername;</holder>
    </copyright>
    &dhdate;
  </refentryinfo>
  <refmeta>
    &dhucpackage;

    &dhsection;
  </refmeta>
  <refnamediv>
    <refname>&dhpackage;</refname>

    <refpurpose>static information about crypted filesystems</refpurpose>
  </refnamediv>
  <refsect1>
    <title>DESCRIPTION</title>
    <para>The file <filename>crypttab</filename> (usually located at
      <filename>/etc/crypttab</filename>) contains descriptive
      information about encrypted file systems.
      <filename>crypttab</filename> is only read by programs, and not
      written; it is the duty of the system administrator to properly
      create and maintain this file. Each filesystem is described on
      a separate line; fields on each line are separated by tabs or spaces.
      Lines starting with <quote>#</quote> are comments, empty lines
      are ignored.
      The order of records in <filename>crypttab</filename> is important
      because the <filename>/etc/init.d/cryptdisks</filename> script
      sequentially iterates through <filename>crypttab</filename> doing
      its thing.
    </para>

    <para>The first field <replaceable>target device</replaceable>
describes the mapped <replaceable>device name</replaceable>.
It must be a plain filename without any directories. A mapped device
<filename>/dev/mapper/</filename><replaceable>device name</replaceable>
will be created by
<citerefentry>
  <refentrytitle>cryptsetup</refentrytitle>
  <manvolnum>8</manvolnum>
</citerefentry>
crypting data from and onto the <replaceable>source device</replaceable>.
    </para>

    <para>The second field <replaceable>source device</replaceable>
describes the block special device that should hold the encrypted data.
    </para>

    <para>The third field <replaceable>key file</replaceable>
describes the file holding the key data used for decrypting the
encrypted data of the <replaceable>source device</replaceable>.

It can also be a device name (eg. <filename>/dev/random</filename>
used for swap devices).

If the <replaceable>key file</replaceable> is empty or the string
<literal>none</literal>, the key data (ie. a password) will be read
interactively from the console. In this case,
the options<literal>precheck</literal>, <literal>postcheck</literal>
and <literal>retry</literal> may be useful.
    </para>

    <para>The fourth field <replaceable>options</replaceable>
describes the cryptsetup options associated with the encryption process.
Options are in the format:
<replaceable>key</replaceable>=<replaceable>value</replaceable>[,<replaceable>key</replaceable>=<replaceable>value</replaceable> ...]

The following options are supported:
    <variablelist>
      <varlistentry>
        <term><literal>cipher</literal></term>
        <listitem>
          <para>Encryption algorithm. See <command>cryptsetup -c</command>.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><literal>size</literal></term>
        <listitem>
          <para>Encryption key size. See <command>cryptsetup -s</command>.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><literal>hash</literal></term>
        <listitem>
          <para>Hash algorithm. See <command>cryptsetup -h</command>.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><literal>verify</literal></term>
        <listitem>
          <para>Verify pasword. Uses <command>cryptsetup -y</command>.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><literal>readonly</literal></term>
        <listitem>
          <para>The backing device is read-only (eg: a dvd).</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><literal>luks</literal></term>
        <listitem>
          <para>Use device with luks extensions.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><literal>swap</literal></term>
        <listitem>
          <para>Run <command>mkswap</command> on the created device.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><literal>tmp</literal></term>
        <listitem>
          <para>Run <command>mke2fs</command> on the created device.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><literal>precheck</literal></term>
	<listitem>
	  <para>check the source device by suitable program;
	  if the check fails the device is not created;
	  If a program is provided as argument, it is run,
	  using the decrypted volume as first argument. Some programs are
	  provided in /usr/share/cryptsetup/prechecks, currently only
	  <literal>swap</literal>; so, providing <literal>swap</literal>
	  as argument will run the check for to ensure that a SWAP partition
	  is a accessible thru the source device.
	  </para>
	</listitem>
      </varlistentry>
      <varlistentry>
        <term><literal>postcheck</literal></term>
	<listitem>
	  <para>check the content of the device by suitable program;
	  if the check fails the device is removed; if the
	  <literal>retry</literal> option is given, the
	  creation is repeated.
	  If a program is provided as argument, it is run,
	  using the decrypted volume as first argument. Some programs are
	  provided in /usr/share/cryptsetup/checks, namely <literal>ext2</literal>
	  and <literal>xfs</literal>; so, providing <literal>ext2</literal>
	  as argument will run the check for to ensure that a EXT2 or EXT3
	  filesystem is a accessible thru the device.
	  </para>
	</listitem>
      </varlistentry>
      <varlistentry>
        <term><literal>retry</literal></term>
	<listitem>
	  <para>If the device creation fails, or if the check
	  program fails, remove the device, and try again to
	  create it: if <literal>key</literal> is "none" this
	  will ask for the password again. The option specifies
	  how many times to repeat.
	  </para>
	</listitem>
      </varlistentry>
    </variablelist>
    </para>
  </refsect1>
  <refsect1>
    <title>EXAMPLES</title>
    <para>Mounting an encrypted swap device:<programlisting>cswap /dev/sda6 /dev/random swap</programlisting>
    </para>
    <para>Mounting an encrypted disk with interactive password:<programlisting>cdisk /dev/sda2</programlisting>
    </para>
    <para>Cipher choosing option:<programlisting>cdisk2 /dev/sda3 none cipher=twofish</programlisting>
    </para>
  </refsect1>
  <refsect1>
    <title>SEE ALSO</title>
    <para>
    <citerefentry>
      <refentrytitle>cryptsetup</refentrytitle>
      <manvolnum>8</manvolnum>
    </citerefentry>,
    <filename>/etc/crypttab</filename>
    </para>
  </refsect1>
  <refsect1>
    <title>AUTHOR</title>
    <para>This manual page was written by &dhusername; &lt;&dhemail;&gt;
    for the &debian; distribution of cryptsetup (but can be used by others).
    Parts of this manual are taken and adapted from the
    <citerefentry>
      <refentrytitle>fstab</refentrytitle>
      <manvolnum>5</manvolnum>
    </citerefentry>
    manual page.</para>
  </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:2
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
